# 가맹점 일일 리포트 자동화 시스템

> 프랜차이즈 본부의 일일 매출/운영 분석을 자동화하여
> 매일 아침 9시에 텔레그램/카카오톡으로 인사이트 리포트를 발송합니다.

## 시스템 개요

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│  Google Sheets  │────▶│    n8n 분석     │────▶│   GPT 리포트    │
│   (매출 데이터)  │     │  (경향 분석)    │     │    (요약)       │
└─────────────────┘     └─────────────────┘     └────────┬────────┘
                                                         │
                        ┌────────────────────────────────┼────────────────────────────────┐
                        ▼                                ▼                                ▼
                ┌──────────────┐                ┌──────────────┐                ┌──────────────┐
                │   텔레그램   │                │   카카오톡   │                │    이메일    │
                │   (알림)     │                │   (선택)     │                │   (선택)     │
                └──────────────┘                └──────────────┘                └──────────────┘
```

## 주요 기능

### 1. 매출 분석
- 일별/주별/월별 매출 추이
- 전일/전주 대비 증감률
- 지점 간 순위 비교

### 2. 고객 분석
- 일일 고객수 및 객단가
- 재방문율 추적
- 피크타임 분석

### 3. 메뉴 분석
- 메뉴별 판매 비중
- 베스트/워스트 메뉴
- 신메뉴 판매 추이

### 4. 재고 관리
- 재고 부족 자동 알림
- 발주 필요 품목 표시
- 예상 소진일 계산

### 5. 인사이트 생성
- 매출 변동 원인 추정
- 개선 방향 제안
- 액션 아이템 도출

## 폴더 구조

```
n8n-franchise-report/
├── workflows/
│   └── franchise-daily-report.json   # n8n 워크플로우 (import용)
├── scripts/
│   ├── generate-sample-data.cjs      # 가상 데이터 생성 스크립트
│   ├── n8n-analysis-code.js          # n8n Code 노드용 분석 코드
│   └── gpt-prompt-template.md        # GPT 프롬프트 템플릿
├── data-templates/
│   ├── 지점A_A001_data.tsv           # 강남역점 샘플 데이터
│   ├── 지점B_B001_data.tsv           # 홍대입구점 샘플 데이터
│   ├── 지점C_C001_data.tsv           # 판교테크노밸리점 샘플 데이터
│   └── 지점D_D001_data.tsv           # 잠실롯데월드점 샘플 데이터
├── docs/
│   └── DATA_SCHEMA.md                # 데이터 스키마 문서
└── README.md                         # 이 파일
```

## 빠른 시작

### Step 1: 구글 시트 설정

1. [구글 시트](https://docs.google.com/spreadsheets/d/1VnOc5BH_ORMEq7Km6sUd93VAnMFvHWK-UPtUlO-MYk0/) 열기
2. 지점A ~ 지점D 탭 생성
3. `data-templates/` 폴더의 TSV 파일 내용을 각 탭에 붙여넣기

### Step 2: n8n 워크플로우 설정

1. n8n 접속 (self-hosted 또는 cloud)
2. `workflows/franchise-daily-report.json` import
3. 자격증명 설정:
   - Google Sheets OAuth
   - OpenAI API Key
   - Telegram Bot Token

### Step 3: 테스트 실행

1. 워크플로우 수동 실행
2. 텔레그램 메시지 확인
3. 스케줄 활성화 (매일 09:00 KST)

## 데이터 스키마 (35개 컬럼)

| 구분 | 컬럼 | 설명 |
|------|------|------|
| 기본 | 날짜, 요일, 가맹점명, 지점코드, 운영시간 | |
| 매출 | 총매출, 카드매출, 현금매출, 배달매출, 할인금액, 순매출 | |
| 고객 | 총고객수, 객단가, 신규회원, 재방문율, 피크타임고객수 | |
| 메뉴 | 아메리카노~신메뉴 (9개 항목) | |
| 시간대 | 오전/점심/오후/저녁 매출 | |
| 재고 | 원두, 우유, 시럽, 컵 | |
| 운영 | 날씨, 기온, 근무인원, 폐기량, 특이사항 | |

자세한 내용은 [DATA_SCHEMA.md](./docs/DATA_SCHEMA.md) 참조

## 예상 결과물

```
━━━━━━━━━━━━━━━━━━━━
📊 2024-01-15 가맹점 일일 리포트
━━━━━━━━━━━━━━━━━━━━

💰 매출 현황
  - 총 매출: 3,244,000원 (전일 대비 +5.8%)
  - 고객수: 734명 | 객단가: 4,420원

🏪 지점별 순위
  1️⃣ 강남역점 1,247,000원 (+8.1%)
  2️⃣ 대전둔산점 1,105,000원 (+12.4%)
  3️⃣ 부산서면점 892,000원 (-3.2%)

☕ 베스트 메뉴
  - 아메리카노 234잔 (45%)
  - 카페라떼 142잔 (27%)

📦 재고 알림
  ⚠️ 강남역점: 우유 2박스 남음 (발주 필요)

📈 주간 트렌드
  최근 7일 평균 대비 +3.2% 상승 추세

💡 오늘의 인사이트
  - 대전둔산점 신메뉴 반응 양호 (+12.4%)
  - 금요일 피크타임 집중도 42%

🎯 액션 아이템
  - 강남역점 우유 발주 요청
  - 대전둔산점 신메뉴 확대 검토
━━━━━━━━━━━━━━━━━━━━
```

## 확장 가능성

### 주간 리포트
- 매주 월요일 발송
- 지난 주 종합 분석
- 주간 목표 대비 달성률

### 이상 탐지 알림
- 매출 급락 시 즉시 알림
- 재고 긴급 부족 알림
- 폐기율 급증 알림

### 대시보드 연동
- Google Data Studio
- Notion Database
- Slack 연동

## 기술 스택

- **자동화**: n8n (self-hosted / cloud)
- **데이터**: Google Sheets
- **AI**: Google Gemini 2.5 Flash (최신)
- **알림**: Telegram Bot API

## 비용 추정

| 항목 | 비용 |
|------|------|
| n8n Cloud | $20/월 (또는 self-hosted 무료) |
| Gemini API | ~$0.3/월 (일일 1회 기준) |
| Telegram | 무료 |
| Google Sheets | 무료 |

**총 예상 비용: $20/월 이하**

### Gemini vs GPT 비교

| 항목 | Gemini 2.5 Flash | GPT-4o-mini |
|------|------------------|-------------|
| 가격 | **$0.10/1M tokens** | $0.15/1M tokens |
| 성능 | 우수 | 우수 |
| n8n 지원 | 기본 노드 | 기본 노드 |

→ Gemini 선택 이유: **33% 저렴** + 프로젝트 통일성

## 라이선스

MIT License

---

**제작**: 유기웅
**용도**: 프랜차이즈 본부 운영 효율화
**포트폴리오**: 가맹점 교육 담당 / 업무 자동화 역량 증빙
